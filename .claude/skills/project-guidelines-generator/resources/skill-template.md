# Skill Template

Templates for the generated project-specific guidelines skill.

---

## SKILL.md Template

```markdown
---
name: {project-name}-guidelines
description: Development guidelines for the {project-display-name} project ({stack-summary}). Use when writing, reviewing, or modifying code in this project. Provides project-specific patterns, conventions, and gotchas that override generic guidelines.
---

# {Project Display Name} Development Guidelines

> Auto-generated by `project-guidelines-generator`. Last updated: {date}.
> Generic sections are regenerated on update. The `## Custom Notes` section is preserved.

## Stack Overview

| Layer | Technology |
|-------|-----------|
| Language | {language} |
| Frontend | {frontend-framework} |
| Backend | {backend-framework} |
| Database | {database} + {orm} |
| Auth | {auth} |
| Queue | {queue} |
| AI | {ai} |
| Monorepo | {monorepo-tool} |
| Deployment | {deployment} |

**Workspaces:**
{workspace-list-with-roles}

---

## Backend Patterns

> Full details: `resources/backend-patterns.md`

### Route Organization
{brief-route-pattern-description}

### Auth Enforcement
{brief-auth-pattern}

### Error Handling
{brief-error-pattern}

### Database Access
{brief-db-pattern}

### Background Jobs
{brief-job-pattern}

---

## Frontend Patterns

> Full details: `resources/frontend-patterns.md`

### Component Structure
{brief-component-pattern}

### Data Fetching
{brief-data-fetching-pattern}

### Auth Integration
{brief-frontend-auth-pattern}

### UI Conventions
{brief-ui-conventions}

### Styling
{brief-styling-approach}

**Rule:** Use named CSS classes for any reusable visual pattern. Inline styles are only acceptable for 1-2 property overrides or truly dynamic runtime values. Extract repeated styles to the project's stylesheet.

---

## Database Guide

> Full details: `resources/database-guide.md`

### ORM Conventions
{brief-orm-conventions}

### Migration Process
{brief-migration-process}

### Known Gotchas
{brief-db-gotchas}

---

## API Contracts

> Full details: `resources/api-contracts.md`

### Shared Types
{brief-shared-types}

### Validation
{brief-validation}

### Response Shape
{brief-response-shape}

---

## Deployment & Operations

### Environment Variables
{env-var-table}

### Deploy Process
{brief-deploy-process}

### Common Commands
{common-commands}

---

## Key Gotchas

{numbered-list-of-gotchas-from-CLAUDE.md-and-memory}

---

## Custom Notes

<!-- This section is preserved when guidelines are regenerated. Add project-specific notes below. -->

```

---

## Resource File Templates

### resources/backend-patterns.md

```markdown
# Backend Patterns — {project-name}

## Route Organization

**Convention:** {detailed description}

**File structure:**
```
{actual directory tree from project}
```

**Registration pattern:**
```{language}
{code snippet from actual codebase}
```

**Key files:**
- {file-path-1}
- {file-path-2}

---

## Auth Middleware

**Convention:** {detailed description}

**Usage pattern:**
```{language}
{code snippet showing auth middleware usage}
```

**Auth context shape:**
```{language}
{type definition or shape of auth object on request}
```

**Gotchas:**
- {gotcha-1}
- {gotcha-2}

---

## Error Handling

**Helpers available:**
```{language}
{error helper function signatures}
```

**Usage:**
```{language}
{example usage in a route}
```

**Error response shape:**
```json
{actual error response JSON}
```

---

## Database Access

**Pattern:** {direct ORM / repository / service layer}

**Example query:**
```{language}
{representative query from codebase}
```

**Transaction pattern:**
```{language}
{transaction example if used}
```

---

## Background Jobs

**Queue setup:**
```{language}
{queue initialization code}
```

**Worker pattern:**
```{language}
{worker handler example}
```

**Configuration:**
- Concurrency: {value}
- Retry: {strategy}
- Backoff: {settings}

---

## Logging

**Logger:** {library}

**Usage:**
```{language}
{logging example}
```
```

### resources/frontend-patterns.md

```markdown
# Frontend Patterns — {project-name}

## Component Organization

**File structure:**
```
{actual directory tree}
```

**Naming convention:** {PascalCase files, barrel exports, etc.}

---

## Data Fetching

**Hook pattern:**
```{language}
{SWR/React Query hook usage example}
```

**API client:**
```{language}
{fetch wrapper code}
```

**Auth token injection:**
```{language}
{how tokens are added to requests}
```

---

## Auth Integration

**Provider setup:**
```{language}
{auth provider in layout/root}
```

**Protected routes:**
```{language}
{how routes are protected}
```

**Accessing auth state:**
```{language}
{useAuth/useUser hook usage}
```

---

## UI Conventions

**Component library:** {shadcn/ui, MUI, etc.}
**Styling:** {Tailwind, CSS modules, styled-components}

**Example component:**
```{language}
{representative component showing conventions}
```

---

## Styling

**Technology:** {SCSS, CSS Modules, Tailwind, styled-components, etc.}
**Stylesheet location:** {path to main stylesheet or partials directory}
**CSS compilation:** {build command or process, e.g., `maintenance/compile-css`}
**CSS variables:** {yes/no, where defined}

**Adding new styles:**
- Create classes in {appropriate file/partial} for reusable visual patterns
- Compile with {build command} after changes

**Inline style policy:**
- 1-2 property overrides: acceptable (e.g., `style="margin-top:1em"`)
- 3+ properties or repeated patterns: extract to a named CSS class
- Dynamic runtime values: acceptable as inline styles
- Layout patterns (flex containers, grid rows): MUST be CSS classes

---

## State Management

**Server state:** {SWR, React Query, etc.}
**Client state:** {Context, Zustand, etc.}

**Provider hierarchy:**
```{language}
{root layout showing provider nesting}
```
```

### resources/database-guide.md

```markdown
# Database Guide — {project-name}

## Schema Overview

**ORM:** {Prisma, Drizzle, SQLAlchemy, etc.}
**Schema location:** {path}

**Key models:**
{list of main models with brief descriptions}

---

## Naming Conventions

**Model names:** {PascalCase, camelCase, etc.}
**Table names:** {snake_case via @@map, etc.}
**Client accessor:** {how to access via ORM client}

Example: Model `CategoryOnConversation` → table `category_on_conversation` → `prisma.categoryOnConversation`

---

## Migration Process

{step-by-step migration workflow}

**Gotchas:**
- {migration-gotcha-1}
- {migration-gotcha-2}

---

## Query Patterns

**Pagination:**
```{language}
{pagination query example}
```

**Filtering:**
```{language}
{filter query example}
```

**Relations/Includes:**
```{language}
{eager loading example}
```

---

## Connection Setup

```{language}
{database client initialization}
```
```

### resources/api-contracts.md

```markdown
# API Contracts — {project-name}

## Shared Package

**Location:** {packages/shared/ or similar}
**Import:** {import { Type } from '@project/shared'}

---

## Type Definitions

**Key types:**
```{language}
{main shared type definitions}
```

---

## Validation Schemas

**Library:** {Zod, yup, joi, etc.}

**Pattern:**
```{language}
{validation schema example}
```

---

## API Response Envelope

**Success:**
```json
{actual success response shape}
```

**Error:**
```json
{actual error response shape}
```

---

## Endpoint Conventions

**URL pattern:** {/api/v1/resource, /api/resource, etc.}
**Methods:** {REST conventions used}
**Auth header:** {Bearer token, cookie, etc.}
```

---

## Important Notes for Generation

1. **Use REAL code snippets** from the project, not fabricated examples
2. **Use REAL file paths** — reference actual files discovered during analysis
3. **Capture gotchas** from CLAUDE.md and memory — these are the most valuable part
4. **Keep the main SKILL.md under 500 lines** — put details in resource files
5. **Don't duplicate CLAUDE.md** — reference it for setup/deploy info, focus on patterns
6. The `## Custom Notes` section MUST be present and empty (or preserved if updating)
7. Resource files can be longer — they're only loaded on demand
